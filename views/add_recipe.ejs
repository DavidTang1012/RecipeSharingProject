<!-- views/add_recipe.ejs -->
<%- include('partials/header') %>

<div class="container">
  <h2 class="mb-4">Add New Recipe</h2>
  <form action="/recipes/add" method="POST" enctype="multipart/form-data">
    <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
      <div class="alert alert-danger">
        <ul>
          <% errors.forEach(error => { %>
            <li><%= error.msg %></li>
          <% }) %>
        </ul>
      </div>
    <% } %>
    
    <div class="form-group mb-3">
      <label for="description">Recipe Name</label>
      <input type="text" class="form-control" id="description" name="description" 
             value="<%= typeof description !== 'undefined' ? description : '' %>" required>
    </div>

    <div class="form-group mb-3">
      <label for="category">Category</label>
      <select class="form-control" id="category" name="category" required>
        <option value="">Select a category</option>
        <option value="breakfast">Breakfast</option>
        <option value="lunch">Lunch</option>
        <option value="dinner">Dinner</option>
        <option value="dessert">Dessert</option>
      </select>
    </div>

    <div class="form-group mb-3">
      <label for="ingredient">Ingredients (comma separated)</label>
      <input type="text" class="form-control" id="ingredient" name="ingredient" 
             value="<%= typeof ingredient !== 'undefined' ? ingredient : '' %>" required>
    </div>

    <div class="form-group mb-3">
      <label for="instruction">Instructions</label>
      <textarea class="form-control" id="instruction" name="instruction" rows="5" required><%= typeof instruction !== 'undefined' ? instruction : '' %></textarea>
    </div>

    <div class="form-group mb-3">
      <label for="photo">Recipe Image</label>
      <input type="file" class="form-control" id="photo" name="photo" accept="image/*">
    </div>

    <div class="form-group mt-4">
      <button type="submit" class="btn btn-primary">Add Recipe</button>
      <a href="/" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
</div>
<%- include('partials/footer') %>