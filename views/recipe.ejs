<%- include('partials/header') %>

<div class="card mb-4">
  <img src="<%= recipe.photo %>" class="card-img-top" alt="Recipe Image">
  <div class="card-body">
    <h3 class="card-title"><%= recipe.description %></h3>
    <h5>Ingredients</h5>
    <ul>
      <% recipe.ingredient.forEach(item => { %>
        <li><%= item %></li>
      <% }) %>
    </ul>
    <h5>Instructions</h5>
    <p><%= recipe.instruction %></p>

    <!-- Likes Section -->
    <p>Likes: <%= likeCount %></p>
    <% if (user) { %>
      <% if (userLiked) { %>
        <!-- 取消点赞按钮 -->
        <form action="/recipes/<%= recipe._id %>/unlike" method="POST">
          <button type="submit" class="btn btn-danger">👎 Unlike</button>
        </form>
      <% } else { %>
        <!-- 点赞按钮 -->
        <form action="/recipes/<%= recipe._id %>/like" method="POST">
          <button type="submit" class="btn btn-primary">👍 Like</button>
        </form>
      <% } %>
    <% } else { %>
      <!-- 未登录用户提示 -->
      <p>
        <a href="/users/login" class="btn btn-secondary">Please log in to like this recipe</a>
      </p>
    <% } %>
  </div>
</div>

<%- include('partials/footer') %>
